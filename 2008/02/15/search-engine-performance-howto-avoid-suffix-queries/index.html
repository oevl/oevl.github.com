<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Search Engine Performance: How to Avoid Suffix Queries â€” Arthur Koziel</title>
    <link rel="stylesheet" href="/master2.css" type="text/css" media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Atom Feed" href="/feeds/main.xml" />
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-4143429-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script');
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
            'http://www') + '.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })();
    </script>
</head>
<body>
    <p>
        <a href="/">Home</a> |
        <a href="/about/">About</a> | 
        <a href="/projects/">Projects</a> |
        <a href="/feeds/main.xml">RSS</a>
    </p>
    
    <h1 id="header">Search Engine Performance: How to Avoid Suffix Queries</h1>
    <p id="date">
        Published 15th February 2008
    </p>
    <p>The reason why <a class="reference external" href="http://lucene.apache.org/">Lucene's</a> QueryParser doesn't allow suffix queries
(<em>&quot;*keyword&quot;</em>) is the inefficient nature of such query types. In order to
find a word with a suffix query, it must iterate through every term in the
index and check if it matches. Depending on the index size, this can
potentially kill performance and slow down your application. There is,
however, a simple trick which lets you perform suffix queries without the
performance disadvantage.</p>
<p>Simply store the reverse of the string and transform suffix queries to prefix
queries against the reverse string.</p>
<p>Here's an example. With two strings in your index</p>
<ol class="upperalpha simple">
<li>&quot;Tee House&quot; B) &quot;Waffle House&quot;</li>
</ol>
<p>you're going to store the reverse string too</p>
<ol class="upperalpha simple">
<li>&quot;esuoH eeT&quot; B) &quot;esuoH elffaW&quot;</li>
</ol>
<p>and transform each suffix query like &quot;<em>House&quot; to &quot;esuoH</em>&quot;. The results will
be the same as with a real suffix query - just faster!</p>
<p>The disadvantage of this method? denormalization. Since each string is going
to be stored twice, index size will become bigger.</p>

    <h2>Comments</h2>
    <div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/arthurkozielsblog/embed.js"></script><noscript><p><a href="http://disqus.com/forums/arthurkozielsblog/?url=ref">View the discussion thread.</a></p></noscript><p><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a></p>

</body>
</html>